import{_ as k,o as l,a as o,b as i,F as _,d as p,t as f,n as g,p as B,e as $,f as y,g as x,h as b,w as I,v as V,m as F,i as N,c as A,j as w,k as P,l as T,q as j,s as L,u as O}from"./index.71b24ed1.js";import{_ as U}from"./ui-nav-header.79ba3aad.js";const E={props:{page:[Number],rows:Number,itemPerPage:{type:Number,default:()=>5},listItemPerPage:{type:Array,default:()=>[0,20,50,100]}},emits:["update:page","update:itemPerPage"],computed:{pages(){if(!parseInt(this.itemPerPage))return 1;let e=0,t=Math.ceil(this.rows/this.itemPerPage);for(let s=0;s<t;s++)e+=1;return e}},watch:{itemPage(e,t){e>this.pages&&(this.itemPage=t)}},methods:{changePage(e){e==="next"&&this.page<this.pages?this.$emit("update:page",this.page+1):e==="back"&&this.page>1?this.$emit("update:page",this.page-1):e.target&&this.$emit("update:page",Math.max(1,Math.min(parseInt(e.target.value),this.pages)))}}},M=e=>(B("data-v-65821ed1"),e=e(),$(),e),R={class:"flex items-center justify-center"},z=["value"],q=["value"],G=["value","max"],H=M(()=>i("span",{class:"px-2"}," / ",-1)),J={class:"px-2"};function K(e,t,s,h,u,r){return l(),o("div",R,[i("select",{value:s.itemPerPage,onChange:t[0]||(t[0]=n=>(e.$emit("update:itemPerPage",parseInt(n.target.value)),e.$emit("update:page",1)))},[(l(!0),o(_,null,p(s.listItemPerPage,n=>(l(),o("option",{value:n,key:n},f(n===0?"All":n),9,q))),128))],40,z),i("div",{class:g(["m-icon page",s.page===1&&"bg-gray-500"]),onClick:t[1]||(t[1]=n=>r.changePage("back"))}," navigate_before ",2),i("input",{class:"w-20",type:"number",value:s.page,onChange:t[2]||(t[2]=(...n)=>r.changePage&&r.changePage(...n)),min:"1",max:r.pages},null,40,G),H,i("div",J,f(r.pages||1),1),i("div",{class:g(["m-icon page",s.page===r.pages&&"bg-gray-500"]),onClick:t[3]||(t[3]=n=>r.changePage("next"))}," navigate_next ",2)])}const Q=k(E,[["render",K],["__scopeId","data-v-65821ed1"]]);const W={props:{rows:{type:Array,default(){return[]}},cols:{type:Object,default(){return{}}},pk:{type:String,default:"id"},sortBy:String,sortDir:String},emits:["onSelect","onColClick"],data(){return{activeItem:"",typeSort:"DESC"}},methods:{onSelect(e){this.activeItem=e,this.$emit("onSelect",this.rows[e])},onFilter(e){e.sortBy&&this.$emit("onColClick",e)}}},X=["onClick"],Y={key:0,class:"m-icon text-sm flex-shrink-0"},Z=["onClick"];function ee(e,t,s,h,u,r){return l(),o(_,null,[y(e.$slots,"default",{},void 0,!0),i("table",null,[i("thead",null,[i("tr",null,[(l(!0),o(_,null,p(s.cols,(n,a)=>(l(),o("th",{key:a,class:g([n.className])},[i("div",{class:"header-table flex cursor-default",onClick:c=>r.onFilter(n)},[i("div",{class:g(["leading-6 flex-grow",{"text-right":n.align==="right"}])},f(e.$t(n.text)),3),n.sortBy?(l(),o("div",Y,f(a===s.sortBy?s.sortDir==="DESC"?"expand_less":"expand_more":"unfold_more"),1)):x("",!0)],8,X)],2))),128))])]),i("tbody",null,[(l(!0),o(_,null,p(s.rows,(n,a)=>(l(),o("tr",{class:g({active:a===u.activeItem}),onClick:c=>r.onSelect(a),key:n[s.pk]},[(l(!0),o(_,null,p(s.cols,(c,v)=>(l(),o("td",{key:v},[y(e.$slots,`col-${v}`,{row:n},()=>[b(f(n[v]),1)],!0)]))),128))],10,Z))),128))])]),y(e.$slots,"footer",{},void 0,!0)],64)}const te=k(W,[["render",ee],["__scopeId","data-v-ff610bcf"]]);const se={props:{items:{type:Array,default(){return[]}},placeholder:{type:String},keyVal:String||Number},emits:["output"],data(){return{showList:!1,search:null,hasItemclick:!1,revert:null}},computed:{list(){let e=[];return this.search?e=this.items.filter(t=>{var s,h;return(h=t.value)==null?void 0:h.toUpperCase().includes((s=this.search)==null?void 0:s.toUpperCase())}):e=this.items,e}},watch:{keyVal(e){var t;this.search=((t=this.items.find(s=>s.key===this.keyVal))==null?void 0:t.value)||this.keyVal||""}},mounted(){var e;this.keyVal&&(this.search=((e=this.items.find(t=>t.key===this.keyVal))==null?void 0:e.value)||this.keyVal)},methods:{onFocusInput(){this.showList=!0},onSelect(e){this.search=e.value,this.$emit("output",e.key),this.showList=!1,this.hasItemclick=!1},onBlurInput(){this.hasItemclick||(this.showList=!1)}}},ae=e=>(B("data-v-96bf7350"),e=e(),$(),e),ne={class:"auto-complete"},le=ae(()=>i("div",{class:"m-icon absolute right-1 top-2"}," close ",-1)),re=["placeholder"],ie={class:"list"},oe=["onClick"];function ue(e,t,s,h,u,r){return l(),o("div",ne,[le,I(i("input",F({type:"text"},e.$attrs,{autocomplete:"off",class:"ac",onFocus:t[0]||(t[0]=(...n)=>r.onFocusInput&&r.onFocusInput(...n)),onBlur:t[1]||(t[1]=(...n)=>r.onBlurInput&&r.onBlurInput(...n)),"onUpdate:modelValue":t[2]||(t[2]=n=>u.search=n),placeholder:s.placeholder,onChange:t[3]||(t[3]=n=>e.$emit("output",n.target.value))}),null,16,re),[[V,u.search]]),I(i("div",ie,[(l(!0),o(_,null,p(r.list,n=>(l(),o("div",{class:"item-list",key:n.key,onMousedown:t[4]||(t[4]=a=>u.hasItemclick=!0),onClick:a=>r.onSelect(n)},[y(e.$slots,"default",{row:n},()=>[b(f(n.value),1)],!0)],40,oe))),128))],512),[[N,u.showList]])])}const ce=k(se,[["render",ue],["__scopeId","data-v-96bf7350"]]);const de={props:{list:{type:Array,defualt:()=>[]},filterData:{type:Object,defualt:()=>({})}},emits:["update:filterData","onSearch"],computed:{listLookup(){const e={};for(let t of this.list)!t.list||(typeof t.list=="function"?e[t.key]=t.list():e[t.key]=t.list);return e}}},he={class:"filter-group"},fe=["for"],_e=["name","value","onChange"],pe=["value"],ge=["min","max","value","onChange"],me=["type","placeholder","value","min","onChange"];function ye(e,t,s,h,u,r){const n=ce;return l(),o("div",he,[(l(!0),o(_,null,p(s.list.filter(a=>a.type!=="chip"),a=>(l(),o("div",{key:a.key,class:g(a.className)},[i("label",{for:a.key},f(a.text)+" : ",9,fe),a.type==="auto"?(l(),A(n,{key:0,class:g([(a==null?void 0:a.isUpperCase)&&"uppercase"]),items:r.listLookup[a.key]||[],placeholder:a.text,"key-val":s.filterData[a.key],onOutput:c=>e.$emit("update:filterData",{...s.filterData,[a.key]:c})},null,8,["class","items","placeholder","key-val","onOutput"])):a.type==="select"?(l(),o("select",{key:1,name:a.text,value:s.filterData[a.key],onChange:c=>e.$emit("update:filterData",{...s.filterData,[a.key]:c.target.value})},[(l(!0),o(_,null,p(a.list,c=>(l(),o("option",{key:c.key,value:c.key},f(c.value),9,pe))),128))],40,_e)):a.type==="time"?(l(),o("input",{key:2,type:"date",min:a.key==="dateEnd"&&s.filterData.dateStart,max:a.key==="dateStart"&&s.filterData.dateEnd,value:s.filterData[a.key],onChange:c=>e.$emit("update:filterData",{...s.filterData,[a.key]:c.target.value})},null,40,ge)):(l(),o("input",{key:3,type:a.type||"text",placeholder:a.text,value:s.filterData[a.key],min:a.min,onChange:c=>e.$emit("update:filterData",{...s.filterData,[a.key]:c.target.value}),autocomplete:"off"},null,40,me))],2))),128)),i("div",null,[i("button",{class:"btn-gray",onClick:t[0]||(t[0]=a=>e.$emit("onSearch",s.filterData))}," Search ")])])}const ve=k(de,[["render",ye]]),ke={props:{dataTable:{type:Object,default:()=>({cols:[],rows:[]})},filters:{type:Array,default:()=>[]},filterData:Object,rows:{type:Array,default:()=>[]},title:String},emits:["onSelectItem","update:filterData"],data(){var e,t;return{rowActions:(e=this.dataTable)!=null&&e.rowActions?(t=this.dataTable)==null?void 0:t.rowActions():[],itemPage:1,itemPerPage:20,sortBy:"",sortDir:""}},computed:{filter:{get(){return this.filterData},set(e){return this.$emit("update:filterData",e)}},pagedRows(){return this.itemPerPage?this.dataTable.rows.slice((this.itemPage-1)*this.itemPerPage,this.itemPage*this.itemPerPage):this.dataTable.rows||[]},tableInfo(){var t;let e=this.dataInfo.rows||[];if(this.sortBy&&this.sortDir){let s=(t=this.dataInfo.cols[this.sortBy])==null?void 0:t.sortByFnc;typeof s=="function"?e.sort(s(this.sortDir)):e.sort((h,u)=>this.sortDir==="DESC"?h[this.sortBy]>u[this.sortBy]?1:h[this.sortBy]<u[this.sortBy]?-1:0:h[this.sortBy]>u[this.sortBy]?-1:h[this.sortBy]<u[this.sortBy]?1:0)}return e}},methods:{onActionBtn(e,t){this.$emit("onSelectItem",{row:e,type:t})}}},Pe={class:"w-full relative"},we={class:"mx-5 h-[calc(100vh-5.6rem)] relative"},be={class:"min-h-[calc(100%-8.75rem)] sm:h-[calc(100%-8.75rem)] sm:overflow-auto"},Ce={class:"flex justify-end"},Se=["onClick"],De={class:"border-t-2 border-b-2 w-full h-15 flex items-center justify-between"},Ie=i("div",null,null,-1);function Be(e,t,s,h,u,r){var C,S;const n=U,a=ve,c=te,v=Q;return l(),o("div",Pe,[w(n,null,{titleNav:P(()=>[b(f(e.$t(s.title||"")),1)]),"btn-right":P(()=>[y(e.$slots,"btn-right",{},()=>[i("button",{class:"btn-green",onClick:t[0]||(t[0]=d=>r.onActionBtn(e.row,"new"))}," new ")])]),_:3}),i("div",we,[i("div",{class:g(["min-h-20",{"border-b-2":(C=s.filters)==null?void 0:C.length}])},[(S=s.filters)!=null&&S.length?(l(),A(a,{key:0,list:s.filters,"filter-data":r.filter,"onUpdate:filter-data":t[1]||(t[1]=d=>r.filter=d),onOnSearch:t[2]||(t[2]=d=>r.onActionBtn(d,"search"))},null,8,["list","filter-data"])):x("",!0)],2),i("div",be,[w(c,{cols:s.dataTable.cols,rows:r.pagedRows,"sort-by":u.sortBy,"sort-dir":u.sortDir,onOnSelect:t[3]||(t[3]=d=>e.$emit("onSelectItem",{row:d,type:"edit"}))},T({"col-actions":P(({row:d})=>[i("div",Ce,[(l(!0),o(_,null,p(u.rowActions,m=>(l(),o("div",{key:m.id,class:"m-icon mr-4 cursor-pointer",onClick:O(D=>r.onActionBtn(d,m.type),["stop"])},f(m.id),9,Se))),128))])]),_:2},[p(e.$slots,(d,m)=>({name:m,fn:P(D=>[y(e.$slots,m,j(L(D)))])}))]),1032,["cols","rows","sort-by","sort-dir"])]),i("div",De,[Ie,i("div",null,[w(v,{rows:s.dataTable.rows.length,page:u.itemPage,"onUpdate:page":t[4]||(t[4]=d=>u.itemPage=d),itemPerPage:u.itemPerPage,"onUpdate:itemPerPage":t[5]||(t[5]=d=>u.itemPerPage=d)},null,8,["rows","page","itemPerPage"])])])])])}const Ae=k(ke,[["render",Be]]);export{Ae as _};
